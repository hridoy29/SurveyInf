
<div class="row top-row">
    <div class="col-md-4" style=" margin-top: 10px; ">
        <label for="fromDateReport">From Date:</label>
        <input type="date" class="form-control" id="fromDate" name="namefromDate" ng-model="fromDate">
    </div>
    <div class="col-md-4" style=" margin-top: 10px; ">
        <label for="toDateReport">To Date:</label>
        <input type="date" id="toDate" class="form-control" name="toDate" ng-model="toDate">
    </div>
    <div class="col-md-4" style=" margin-top: 10px; ">
        <label for="toDateReport">Distrbutor Name: </label>
        <div class="form-group"ng-class="{'has-error':frm.Distributor.$touched && frm.Distributor.$invalid}" data-toggle="tooltip" data-placement="bottom" title="Distributor">
            <select class="form-control" id="distributoName" name="Distributor" ng-model="cmbDistributor" ng-options=" distributor.Name for  distributor in distributorList track by  distributor.Id" ng-change="distributorId= cmbDistributor.Id" required>
                <option value="" selected>{{DistributorName}}</option>
            </select>
        </div>
    </div>
    <!--<div class="col-md-4" style=" margin-top: 10px; ">
        <label for="toDateReport">Distrbutor Name:</label>
        <input type="text" class="form-control" placeholder="Search By Distrbutor Name" ng-model="DistrbutorName">
    </div>-->
    <div class="col-md-4" style=" margin-top: 10px; margin-bottom:10px" >
        <label for="toDateReport">Surveyor Name:</label>
        <input type="text" class="form-control" placeholder="Search By Surveyor Name" ng-model="SurveyorName">
    </div>
    <div class="col-md-4" style=" display:flex; margin-top: 35px; ">
        <label for="toDateReport"></label>
        <button type="submit" class="btn  btn-success box-shadow--8dp" style="min-width:90px !important; margin-right: 30px; margin-bottom: 5px" ng-disabled="frm.$invalid" ng-click="getList()">Search</button>
        <button type="submit" class="btn  btn-primary box-shadow--8dp" style="min-width:90px !important; margin-right: 30px; margin-bottom: 5px" ng-disabled="frm.$invalid" ng-click="Refresh()">Refresh</button>
        <button type="submit" class="btn  btn-warning box-shadow--8dp" style="min-width:90px !important; margin-right: 30px; margin-bottom: 5px" ng-disabled="frm.$invalid" ng-click="getExport(entityListPaged)">Export</button>
    </div>
</div>
<div class="row">

    <!--<div class="col-md-2">
        <label for="toDateReport">Select Month</label>

    </div>
    <div class="col-md-3">

        <div class='input-group date datepicker' id='questionnairePhysicalStock'>
            <input type='text' name="tgl" class="form-control" id="toDate" />
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-calendar"></span>
            </span>
        </div>


    </div>
    <div class="col-md-3">
        <div class="form-group" style="padding: 5px 15px !important" ng-class="{'has-error':frm.Distributor.$touched && frm.Distributor.$invalid}" data-toggle="tooltip" data-placement="bottom" title="Distributor">
            <select class="form-control" id="txtFocus" name="Distributor" ng-model="cmbDistributor" ng-options=" distributor.Name for  distributor in distributorList track by  distributor.Id" ng-change="distributorId= cmbDistributor.Id" required>
                <option value="" selected>{{DistributorName}}</option>
            </select>
        </div>
    </div>-->
    <!--<div class="col-md-3">
        <div class="">
            <button type="submit" class="btn btn-lg btn-warning box-shadow--8dp" style="min-width:90px !important; margin-right: 30px; margin-bottom: 5px" ng-disabled="frm.$invalid" ng-click="getList()">Search</button>
            <button type="submit" class="btn btn-lg btn-warning box-shadow--8dp" style="min-width:90px !important; margin-right: 30px; margin-bottom: 5px" ng-disabled="frm.$invalid" ng-click="getExport(entityListPaged)">Export</button>

        </div>
    </div>-->
    <div class="col-md-12">
        <div class="portlet box purple">
            <div class="portlet-title sbold">
                <div class="caption">
                    <label>
                        List of Questionnaire Physical Stocks Reports Details
                    </label>
                </div>
            </div>


            <div class="portlet-body">
                <div class="tbl-outer">
                    <table class="table table-striped">
                        <thead>
                            <tr class="t-head" style="font-size: 14px !important" ng-class-even="'even'" ng-class-odd="'odd'">
                                <th></th>
                                <th class="sbold">SL No.</th>
                                <!--<th class="sbold text-center" data-th="Details"><span>DB Code</span></th>-->
                                <th class="sbold text-center">Distributor's' Name</th>
                                <th class="sbold text-center">DB Code</th>
                                <th class="sbold text-center">Item Group</th>
                                <th class="sbold text-center">Total System Stock</th>
                                <th class="sbold text-center">Total Physical Stock</th>
                                <th class="sbold text-center">Total BBD & Damage</th>
                                <th class="sbold text-center">Total Difference</th>
                                <th class="sbold text-center">Issue</th>
                            </tr>
                        </thead>
                        <tbody dir-paginate="item in entityListPaged | filter:q | itemsPerPage: DefaultPerPage" current-page="currentPage" total-items="total_count" pagination-id="cust">
                            <tr ng-class-even="'even'" ng-class-odd="'odd'">

                                <td>
                                    <button type="button" ng-click="expanded = !expanded" class="btn btn-default">
                                        <span ng-bind="expanded ? '-' : '+'"></span>
                                    </button>
                                </td>
                                <td class="text-center">{{$index + ((currentPage-1)*PerPage) + 1}}</td>

                                <td class="text-center"> {{item.DistributorName}} </td>
                                <td class="text-center"> {{item.DbCode}} </td>
                                <td class="text-center"> {{item.ItemGroup}} </td>
                                <td class="text-center"> {{item.SystemStockSum}} </td>
                                <td class="text-center"> {{item.PhysicalStockSum}} </td>
                                <td class="text-center"> {{item.BBDDamageSum}} </td>
                                <td class="text-center"> {{item.DifferenceSum}} </td>
                                <td class="text-center"> {{item.Issue}} </td>

                            </tr>

                            <tr class="sub" ng-show="expanded">

                                <td colspan="10">

                                    <table class="table table-responsive table-striped" border="1" cellpadding="0" cellspacing="0" style=" width:100%; border-collapse:collapse;">
                                        <thead>
                                            <tr>


                                                <th>#</th>
                                                <th class="sbold text-center">Item Name</th>
                                                <th class="sbold text-center">System Stock</th>
                                                <th class="sbold text-center">Physical Stock</th>
                                                <th class="sbold text-center">BBD & Damage</th>
                                                <th class="sbold text-center">Difference</th>
                                                <th class="sbold text-center">Any Issues</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <tr dir-paginate="subItem in  item.ItemGroupWisePhysicalStockList|orderBy:sortKey:reverse|filter:search|itemsPerPage:10"
                                                ng-class-even="'even'" ng-class-odd="'odd'">

                                                <td class="text-center">{{$index  + 1}}</td>
                                                <td class="text-center"> {{subItem.ItemName}} </td>
                                                <td class="text-center"> {{subItem.SystemStock}} </td>
                                                <td class="text-center"> {{subItem.PhysicalStock}} </td>
                                                <td class="text-center"> {{subItem.BBDDamage}} </td>
                                                <td class="text-center"> {{subItem.Difference}} </td>
                                                <td class="text-center"> {{subItem.Issue}} </td>

                                            </tr>

                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="tbl-outer" style="padding:10px 20px !important">
                        <dir-pagination-controls pagination-id="cust"
                                                 direction-links="true"
                                                 boundary-links="true" on-page-change="onPageChange(currentPage)"></dir-pagination-controls>
                    </div>
                </div>

            </div>

            <!--</div>-->

        </div>
    </div>
</div>
<script>
    $('#questionnairePhysicalStock').datepicker({
        format: 'MM/yyyy',
        icons: {
            time: 'fa fa-time',
            date: 'fa fa-calendar',
            up: 'fa fa-chevron-up',
            down: 'fa fa-chevron-down',
            previous: 'fa fa-chevron-left',
            next: 'fa fa-chevron-right',
            today: 'fa fa-screenshot',
            clear: 'fa fa-trash',
            close: 'fa fa-remove'
        },
        startView: "months",
        minViewMode: "months"
    });
    $('#distributoName').select2();
</script>
